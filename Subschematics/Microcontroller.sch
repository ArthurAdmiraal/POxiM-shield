EESchema Schematic File Version 4
LIBS:POxiM-wristcomputer-cache
EELAYER 29 0
EELAYER END
$Descr A4 11693 8268
encoding utf-8
Sheet 4 9
Title "Microcontroller"
Date "2020-05-29"
Rev "A"
Comp "POxiM"
Comment1 "By Arthur Admiraal & Daan de Groot"
Comment2 "Performs signal processing and control"
Comment3 ""
Comment4 ""
$EndDescr
Wire Wire Line
	6000 4850 6000 5150
Wire Wire Line
	6000 5150 5350 5150
Wire Wire Line
	5400 4550 5000 4550
Wire Wire Line
	5000 4550 5000 4800
Wire Wire Line
	5000 5000 5000 5150
Connection ~ 5000 5150
Wire Wire Line
	5000 5150 4700 5150
Wire Wire Line
	5400 4450 4700 4450
Wire Wire Line
	4700 4450 4700 4800
Wire Wire Line
	4700 5000 4700 5150
Connection ~ 4700 5150
Wire Wire Line
	4700 5150 4000 5150
Wire Wire Line
	6000 2850 6000 2250
Wire Wire Line
	5250 2550 5250 2650
Wire Wire Line
	5250 2650 4950 2650
Wire Wire Line
	4950 2550 4950 2650
Wire Wire Line
	6000 2250 5550 2250
Wire Wire Line
	4950 2250 4950 2350
Wire Wire Line
	5250 2350 5250 2250
Connection ~ 5250 2250
Wire Wire Line
	5250 2250 4950 2250
Wire Wire Line
	5550 2350 5550 2250
Connection ~ 5550 2250
Wire Wire Line
	5550 2250 5250 2250
Wire Wire Line
	5550 2550 5550 2650
Wire Wire Line
	5550 2650 5350 2650
Connection ~ 5250 2650
$Comp
L Device:Ferrite_Bead_Small FB1
U 1 1 5EBC4A36
P 4600 2250
F 0 "FB1" V 4363 2250 50  0000 C CNN
F 1 "Ferrite_Bead_Small" V 4454 2250 50  0000 C CNN
F 2 "Inductor_SMD:L_0603_1608Metric" V 4530 2250 50  0001 C CNN
F 3 "~" H 4600 2250 50  0001 C CNN
F 4 "Murata Electronics" V 4600 2250 50  0001 C CNN "Mfr."
F 5 "BLM18KG221BH1D" V 4600 2250 50  0001 C CNN "Mfr. No."
F 6 "81-BLM18KG221BH1D" V 4600 2250 50  0001 C CNN "Mouser No."
	1    4600 2250
	0    1    1    0   
$EndComp
$Comp
L Device:C_Small C8
U 1 1 5EBC882D
P 5250 2450
F 0 "C8" H 5262 2525 50  0000 L CNN
F 1 "100nF" H 5262 2378 50  0000 L CNN
F 2 "Capacitor_SMD:C_0603_1608Metric" H 5250 2450 50  0001 C CNN
F 3 "~" H 5250 2450 50  0001 C CNN
F 4 "Murata Electronics" H 5250 2450 50  0001 C CNN "Mfr."
F 5 "GCJ188R71E104KA12D" H 5250 2450 50  0001 C CNN "Mfr. No."
F 6 "81-GCJ188R71E104KA2D" H 5250 2450 50  0001 C CNN "Mouser No."
	1    5250 2450
	1    0    0    -1  
$EndComp
$Comp
L Device:C_Small C6
U 1 1 5EBC898E
P 4950 2450
F 0 "C6" H 4962 2525 50  0000 L CNN
F 1 "2.2uF" H 4962 2378 50  0000 L CNN
F 2 "Capacitor_SMD:C_0805_2012Metric" H 4950 2450 50  0001 C CNN
F 3 "~" H 4950 2450 50  0001 C CNN
F 4 "Murata Electronics" H 4950 2450 50  0001 C CNN "Mfr."
F 5 "GCM21BR71E225KA73L" H 4950 2450 50  0001 C CNN "Mfr. No."
F 6 "81-GCM21BR71E225KA3L" H 4950 2450 50  0001 C CNN "Mouser No."
	1    4950 2450
	1    0    0    -1  
$EndComp
$Comp
L Device:C_Small C7
U 1 1 5EBCB357
P 5000 4900
F 0 "C7" H 5012 4975 50  0000 L CNN
F 1 "470nF" H 5012 4828 50  0000 L CNN
F 2 "Capacitor_SMD:C_0603_1608Metric" H 5000 4900 50  0001 C CNN
F 3 "~" H 5000 4900 50  0001 C CNN
F 4 "Murata Electronics" H 5000 4900 50  0001 C CNN "Mfr."
F 5 "GCM188R71E474KA64D" H 5000 4900 50  0001 C CNN "Mfr. No."
F 6 "81-GCM188R71E474KA4D" H 5000 4900 50  0001 C CNN "Mouser No."
	1    5000 4900
	1    0    0    -1  
$EndComp
Text Label 7150 3550 2    50   ~ 0
SWIM
Wire Wire Line
	6600 4050 7250 4050
Text Label 7150 4050 2    50   ~ 0
ADC_in
Text Label 4700 3950 0    50   ~ 0
LED_R
Text Label 4700 3850 0    50   ~ 0
LED_IR
Text Notes 7300 4100 0    50   ~ 0
AIN6
Text Label 4700 4250 0    50   ~ 0
ADC_feedback
Text Notes 4250 4300 2    50   ~ 0
TIM1_CH2
Wire Wire Line
	5350 2650 5350 5150
Connection ~ 5350 2650
Wire Wire Line
	5350 2650 5250 2650
Connection ~ 5350 5150
Wire Wire Line
	5350 5150 5000 5150
Text Label 5000 4450 0    50   ~ 0
NRST
Text Label 5000 4550 0    50   ~ 0
VCAP
Text HLabel 4000 5150 0    50   Input ~ 0
GND
Text HLabel 4050 2250 0    50   Input ~ 0
5V
Wire Wire Line
	4700 2250 4950 2250
Connection ~ 4950 2250
Wire Wire Line
	4050 2250 4500 2250
Wire Wire Line
	5400 4150 4450 4150
Wire Wire Line
	5400 4050 4450 4050
Wire Wire Line
	5400 3650 4450 3650
Wire Wire Line
	5400 3550 4450 3550
Wire Wire Line
	5400 3350 4450 3350
Wire Wire Line
	5400 3250 4450 3250
Wire Wire Line
	5400 3150 4450 3150
Wire Bus Line
	4600 5650 4350 5400
Entry Wire Line
	4350 3750 4450 3650
Entry Wire Line
	4350 3650 4450 3550
Entry Wire Line
	4350 3450 4450 3350
Entry Wire Line
	4350 3350 4450 3250
Entry Wire Line
	4350 3250 4450 3150
$Comp
L Device:C_Small C9
U 1 1 5EC2C4C9
P 5550 2450
F 0 "C9" H 5562 2525 50  0000 L CNN
F 1 "100nF" H 5562 2378 50  0000 L CNN
F 2 "Capacitor_SMD:C_0603_1608Metric" H 5550 2450 50  0001 C CNN
F 3 "~" H 5550 2450 50  0001 C CNN
F 4 "Murata Electronics" H 5550 2450 50  0001 C CNN "Mfr."
F 5 "GCJ188R71E104KA12D" H 5550 2450 50  0001 C CNN "Mfr. No."
F 6 "81-GCJ188R71E104KA2D" H 5550 2450 50  0001 C CNN "Mouser No."
	1    5550 2450
	1    0    0    -1  
$EndComp
$Comp
L Device:C_Small C5
U 1 1 5EC2C862
P 4700 4900
F 0 "C5" H 4712 4975 50  0000 L CNN
F 1 "100nF" H 4712 4828 50  0000 L CNN
F 2 "Capacitor_SMD:C_0603_1608Metric" H 4700 4900 50  0001 C CNN
F 3 "~" H 4700 4900 50  0001 C CNN
F 4 "Murata Electronics" H 4700 4900 50  0001 C CNN "Mfr."
F 5 "GCJ188R71E104KA12D" H 4700 4900 50  0001 C CNN "Mfr. No."
F 6 "81-GCJ188R71E104KA2D" H 4700 4900 50  0001 C CNN "Mouser No."
	1    4700 4900
	1    0    0    -1  
$EndComp
Text HLabel 5000 5650 2    50   Output ~ 0
Segment[0..6]
Text Label 4650 3150 0    50   ~ 0
Segment0
Text Label 4650 3250 0    50   ~ 0
Segment1
Text Label 4650 3350 0    50   ~ 0
Segment2
Text Label 4650 3550 0    50   ~ 0
Segment3
Text Label 4650 3650 0    50   ~ 0
Segment4
Text Label 4700 4050 0    50   ~ 0
Segment5
Text Label 4700 4150 0    50   ~ 0
Segment6
Wire Bus Line
	4600 5650 5000 5650
Text Label 6900 3650 0    50   ~ 0
Common0
Text Label 6900 3750 0    50   ~ 0
Common1
Entry Wire Line
	4350 4150 4450 4050
Entry Wire Line
	4350 4250 4450 4150
Wire Bus Line
	8150 3400 8350 3200
Wire Bus Line
	8350 3200 8700 3200
Text HLabel 8700 3200 2    50   Output ~ 0
Common[0..1]
Text Label 7150 3950 2    50   ~ 0
UART1_TX
Wire Wire Line
	4600 4250 4600 5350
Wire Wire Line
	4600 5350 4850 5350
Wire Wire Line
	4600 4250 5400 4250
Text HLabel 5000 5350 2    50   Output ~ 0
ADC_feedback
Wire Wire Line
	7250 4050 7250 5350
Wire Wire Line
	7250 5350 6650 5350
Text HLabel 6650 5350 0    50   Input ~ 0
ADC_input
Wire Wire Line
	6600 3950 7200 3950
Wire Wire Line
	5400 3850 3900 3850
Wire Wire Line
	5400 3950 4250 3950
Wire Wire Line
	6600 3550 7400 3550
Text HLabel 7400 3550 2    50   Output ~ 0
SWIM
Text HLabel 3700 3950 0    50   Output ~ 0
LED_R
Text HLabel 3700 3850 0    50   Output ~ 0
LED_IR
Text HLabel 7200 3950 2    50   Output ~ 0
UART1_TX
Text Notes 3300 4000 2    50   ~ 0
TIM1_CH4
Text Notes 3300 3900 2    50   ~ 0
TIM1_CH3
$Comp
L MCU_ST_STM8:STM8S003F3P U2
U 1 1 5EBBDDDF
P 6000 3850
F 0 "U2" H 6350 2950 50  0000 C CNN
F 1 "STM8S003F3P" H 6300 4750 50  0000 C CNN
F 2 "Package_SO:TSSOP-20_4.4x6.5mm_P0.65mm" H 6050 4950 50  0001 L CNN
F 3 "http://www.st.com/st-web-ui/static/active/en/resource/technical/document/datasheet/DM00024550.pdf" H 5950 3450 50  0001 C CNN
F 4 "STMicroelectronics" H 6000 3850 50  0001 C CNN "Mfr."
F 5 "STM8S003F3P6" H 6000 3850 50  0001 C CNN "Mfr. No."
F 6 "511-STM8S003F3P6" H 6000 3850 50  0001 C CNN "Mouser No."
	1    6000 3850
	1    0    0    -1  
$EndComp
Wire Wire Line
	6600 3850 7750 3850
Entry Wire Line
	8050 3750 8150 3650
Entry Wire Line
	8050 3650 8150 3550
Wire Wire Line
	6600 3750 7750 3750
Wire Wire Line
	6600 3650 8000 3650
$Comp
L Connector:TestPoint TP5
U 1 1 5EC9F683
P 7750 3450
F 0 "TP5" H 7808 3568 50  0000 L CNN
F 1 "PD3" H 7808 3477 50  0000 L CNN
F 2 "TestPoint:TestPoint_Loop_D2.60mm_Drill1.4mm_Beaded" H 7950 3450 50  0001 C CNN
F 3 "~" H 7950 3450 50  0001 C CNN
F 4 "5005" H 7750 3450 50  0001 C CNN "Mfr. No."
F 5 "534-5005" H 7750 3450 50  0001 C CNN "Mouser No."
F 6 "Keystone Electronics" H 7750 3450 50  0001 C CNN "Mfr."
	1    7750 3450
	1    0    0    -1  
$EndComp
Wire Wire Line
	7750 3450 7750 3750
Connection ~ 7750 3750
Wire Wire Line
	7750 3750 8050 3750
Wire Wire Line
	8000 3250 8000 3650
Connection ~ 8000 3650
Wire Wire Line
	8000 3650 8050 3650
Wire Wire Line
	7750 3900 7750 3850
$Comp
L Connector:TestPoint TP7
U 1 1 5ECE180B
P 8000 3250
F 0 "TP7" H 8058 3368 50  0000 L CNN
F 1 "PD2" H 8058 3277 50  0000 L CNN
F 2 "TestPoint:TestPoint_Loop_D2.60mm_Drill1.4mm_Beaded" H 8200 3250 50  0001 C CNN
F 3 "~" H 8200 3250 50  0001 C CNN
F 4 "5005" H 8000 3250 50  0001 C CNN "Mfr. No."
F 5 "534-5005" H 8000 3250 50  0001 C CNN "Mouser No."
F 6 "Keystone Electronics" H 8000 3250 50  0001 C CNN "Mfr."
	1    8000 3250
	1    0    0    -1  
$EndComp
$Comp
L Connector:TestPoint TP6
U 1 1 5ECE1D50
P 7750 3900
F 0 "TP6" H 7808 4018 50  0000 L CNN
F 1 "PD4" H 7808 3927 50  0000 L CNN
F 2 "TestPoint:TestPoint_Loop_D2.60mm_Drill1.4mm_Beaded" H 7950 3900 50  0001 C CNN
F 3 "~" H 7950 3900 50  0001 C CNN
F 4 "5005" H 7750 3900 50  0001 C CNN "Mfr. No."
F 5 "534-5005" H 7750 3900 50  0001 C CNN "Mouser No."
F 6 "Keystone Electronics" H 7750 3900 50  0001 C CNN "Mfr."
	1    7750 3900
	1    0    0    1   
$EndComp
$Comp
L Connector:TestPoint TP4
U 1 1 5ECE3128
P 7250 5400
F 0 "TP4" H 7308 5518 50  0000 L CNN
F 1 "ADC_in" H 7308 5427 50  0000 L CNN
F 2 "TestPoint:TestPoint_Loop_D2.60mm_Drill1.4mm_Beaded" H 7450 5400 50  0001 C CNN
F 3 "~" H 7450 5400 50  0001 C CNN
F 4 "5005" H 7250 5400 50  0001 C CNN "Mfr. No."
F 5 "534-5005" H 7250 5400 50  0001 C CNN "Mouser No."
F 6 "Keystone Electronics" H 7250 5400 50  0001 C CNN "Mfr."
	1    7250 5400
	1    0    0    1   
$EndComp
Wire Wire Line
	7250 5400 7250 5350
Connection ~ 7250 5350
$Comp
L Connector:TestPoint TP3
U 1 1 5ECE4B41
P 4850 5400
F 0 "TP3" H 4908 5518 50  0000 L CNN
F 1 "ADC_FB" H 4908 5427 50  0000 L CNN
F 2 "TestPoint:TestPoint_Loop_D2.60mm_Drill1.4mm_Beaded" H 5050 5400 50  0001 C CNN
F 3 "~" H 5050 5400 50  0001 C CNN
F 4 "5005" H 4850 5400 50  0001 C CNN "Mfr. No."
F 5 "534-5005" H 4850 5400 50  0001 C CNN "Mouser No."
F 6 "Keystone Electronics" H 4850 5400 50  0001 C CNN "Mfr."
	1    4850 5400
	1    0    0    1   
$EndComp
Connection ~ 4850 5350
Wire Wire Line
	4850 5350 5000 5350
Wire Wire Line
	4850 5400 4850 5350
$Comp
L Connector:TestPoint TP2
U 1 1 5ECE63D7
P 4250 3700
F 0 "TP2" H 4308 3818 50  0000 L CNN
F 1 "LED_R" H 4308 3727 50  0000 L CNN
F 2 "TestPoint:TestPoint_Loop_D2.60mm_Drill1.4mm_Beaded" H 4450 3700 50  0001 C CNN
F 3 "~" H 4450 3700 50  0001 C CNN
F 4 "5005" H 4250 3700 50  0001 C CNN "Mfr. No."
F 5 "534-5005" H 4250 3700 50  0001 C CNN "Mouser No."
F 6 "Keystone Electronics" H 4250 3700 50  0001 C CNN "Mfr."
	1    4250 3700
	-1   0    0    -1  
$EndComp
$Comp
L Connector:TestPoint TP1
U 1 1 5ECE823B
P 3900 3700
F 0 "TP1" H 3958 3818 50  0000 L CNN
F 1 "LED_IR" H 3958 3727 50  0000 L CNN
F 2 "TestPoint:TestPoint_Loop_D2.60mm_Drill1.4mm_Beaded" H 4100 3700 50  0001 C CNN
F 3 "~" H 4100 3700 50  0001 C CNN
F 4 "5005" H 3900 3700 50  0001 C CNN "Mfr. No."
F 5 "534-5005" H 3900 3700 50  0001 C CNN "Mouser No."
F 6 "Keystone Electronics" H 3900 3700 50  0001 C CNN "Mfr."
	1    3900 3700
	-1   0    0    -1  
$EndComp
Wire Wire Line
	3900 3700 3900 3850
Connection ~ 3900 3850
Wire Wire Line
	3900 3850 3700 3850
Wire Wire Line
	4250 3700 4250 3950
Connection ~ 4250 3950
Wire Wire Line
	4250 3950 3700 3950
$Comp
L Connector:TestPoint TP20
U 1 1 5EC25FC2
P 7650 3050
AR Path="/5EBC558F/5EC25FC2" Ref="TP20"  Part="1" 
AR Path="/5EBC342A/5EC25FC2" Ref="TP?"  Part="1" 
F 0 "TP20" H 7708 3168 50  0000 L CNN
F 1 "GND" H 7708 3077 50  0000 L CNN
F 2 "TestPoint:TestPoint_Loop_D2.60mm_Drill1.4mm_Beaded" H 7850 3050 50  0001 C CNN
F 3 "~" H 7850 3050 50  0001 C CNN
F 4 "5005" H 7650 3050 50  0001 C CNN "Mfr. No."
F 5 "534-5005" H 7650 3050 50  0001 C CNN "Mouser No."
F 6 "Keystone Electronics" H 7650 3050 50  0001 C CNN "Mfr."
	1    7650 3050
	1    0    0    -1  
$EndComp
Text HLabel 7600 3100 0    50   Input ~ 0
GND
Wire Wire Line
	7600 3100 7650 3100
Wire Wire Line
	7650 3100 7650 3050
$Comp
L Connector:TestPoint TP19
U 1 1 5EC27CB5
P 3900 3350
AR Path="/5EBC558F/5EC27CB5" Ref="TP19"  Part="1" 
AR Path="/5EBC342A/5EC27CB5" Ref="TP?"  Part="1" 
F 0 "TP19" H 3958 3468 50  0000 L CNN
F 1 "GND" H 3958 3377 50  0000 L CNN
F 2 "TestPoint:TestPoint_Loop_D2.60mm_Drill1.4mm_Beaded" H 4100 3350 50  0001 C CNN
F 3 "~" H 4100 3350 50  0001 C CNN
F 4 "5005" H 3900 3350 50  0001 C CNN "Mfr. No."
F 5 "534-5005" H 3900 3350 50  0001 C CNN "Mouser No."
F 6 "Keystone Electronics" H 3900 3350 50  0001 C CNN "Mfr."
	1    3900 3350
	1    0    0    -1  
$EndComp
Text HLabel 3850 3400 0    50   Input ~ 0
GND
Wire Wire Line
	3850 3400 3900 3400
Wire Wire Line
	3900 3400 3900 3350
Wire Bus Line
	8150 3400 8150 3650
Wire Bus Line
	4350 3250 4350 5400
$EndSCHEMATC
